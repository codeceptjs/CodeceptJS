<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Acceptance Testing · CodeceptJS</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;How does your client, manager, or tester, or any other non-technical person, know your web application is working? By opening the browser, accessing a site, clicking on links, filling in the forms, and actually seeing the content on a web page.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Acceptance Testing · CodeceptJS"/><meta property="og:type" content="website"/><meta property="og:url" content="https://codecept.io/index.html"/><meta property="og:description" content="&lt;p&gt;How does your client, manager, or tester, or any other non-technical person, know your web application is working? By opening the browser, accessing a site, clicking on links, filling in the forms, and actually seeing the content on a web page.&lt;/p&gt;
"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-30075781-3"></script><script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments); }
              gtag('js', new Date());
              gtag('config', 'UA-30075781-3');
            </script><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://platform.twitter.com/widgets.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg" alt="CodeceptJS"/><h2 class="headerTitleWithLogo">CodeceptJS</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/quickstart" target="_self">Quickstart</a></li><li class=""><a href="/basics" target="_self">Guides</a></li><li class=""><a href="/reference" target="_self">API</a></li><li class=""><a href="/changelog" target="_self">Releases</a></li><li class=""><a href="/help" target="_self">Support</a></li><li class=""><a href="https://github.com/Codeception/CodeceptJS" target="_self">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/Codeception/CodeceptJS/blob/master/docs/acceptance.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Acceptance Testing</h1></header><article><div><span><p>How does your client, manager, or tester, or any other non-technical person, know your web application is working? By opening the browser, accessing a site, clicking on links, filling in the forms, and actually seeing the content on a web page.</p>
<p>Acceptance (also called End to End) tests can cover standard but complex scenarios from a user's perspective. With acceptance tests you can be confident that users, following all defined scenarios, won't get errors. We check <strong>not just functionality of application but a user interface</strong> (UI) as well.</p>
<p>By default CodeceptJS uses <a href="/helpers/WebDriver/">WebDriver</a> helper and <strong>Selenium</strong> to automate browser. Within web page you can locate elements, interact with them, and check that expected elements are present on a page.
However, you can also choose <a href="/helpers/Puppeteer">Puppeteer</a>, <a href="/helpers/Nightmare">Nightmare</a> or <a href="/helpers/Protractor">Protractor</a> helpers, driven by corresponding libraries.
No matter of helper and library you use for acceptance testing, CodeceptJS should execute same actions in similar manner.</p>
<p>In case of CodeceptJS you can be sure that in code it will be as easy as it sounds. You just describe a test scenario with JavaScript DSL and allow the framework to handle the rest.</p>
<p>Within web page you can locate elements, interact with them, and check that expected elements are present on a page. That is what a test look like.
That is what a test look like.</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/login'</span>);
<span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'Username'</span>, <span class="hljs-string">'john'</span>);
<span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'Password'</span>, <span class="hljs-string">'123456'</span>);
<span class="hljs-built_in">I</span>.click(<span class="hljs-string">'Login'</span>);
<span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Welcome, John'</span>);
</code></pre>
<p>This is how we can check that login form of a simple web application works. At first we opened <code>/login</code> page, then filled forms and in the end we saw the greetings text.</p>
<h2><a class="anchor" aria-hidden="true" id="locating-element"></a><a href="#locating-element" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Locating Element</h2>
<p>Element can be found by CSS or XPath locators. Practically every steps
in WebDriver helper accept them both.</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">I</span>.seeElement(<span class="hljs-string">'.user'</span>); <span class="hljs-comment">// element with CSS class user</span>
<span class="hljs-built_in">I</span>.seeElement(<span class="hljs-string">'//button[contains(., "press me")]'</span>); <span class="hljs-comment">// button</span>
</code></pre>
<p>By default CodeceptJS tries to guess the locator type.
In order to specify exact locator type you can pass a hash called <strong>strict locator</strong>.</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">I</span>.seeElement({<span class="hljs-attr">css</span>: <span class="hljs-string">'div.user'</span>});
<span class="hljs-built_in">I</span>.seeElement({<span class="hljs-attr">xpath</span>: <span class="hljs-string">'//div[@class=user]'</span>});
</code></pre>
<p>Strict locators allow to specify additional locator types:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// locate form element by name</span>
<span class="hljs-built_in">I</span>.seeElement({<span class="hljs-attr">name</span>: <span class="hljs-string">'password'</span>});
<span class="hljs-comment">// locate element by id</span>
<span class="hljs-built_in">I</span>.seeElement({<span class="hljs-attr">id</span>: <span class="hljs-string">'users'</span>});
</code></pre>
<p>In <a href="http://codecept.io/mobile/#locating-elements">mobile testing</a> you can use <code>~</code> to specify accessibility id to locate an element. In web application you can locate element by their <code>aria-label</code> value.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// locate element by [aria-label] attribute in web</span>
<span class="hljs-comment">// or by accessibility id in mobile</span>
<span class="hljs-built_in">I</span>.seeElement(<span class="hljs-string">'~username'</span>);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="clicking"></a><a href="#clicking" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Clicking</h2>
<p>CodeceptJS provides a flexible syntax to specify an element to click.</p>
<p>By default CodeceptJS tries to find button or link with exact text on it</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// search for link or button</span>
<span class="hljs-built_in">I</span>.click(<span class="hljs-string">'Login'</span>);
</code></pre>
<p>If none found, CodeceptJS tries to find link or button containing that text. In case an image is clickable its <code>alt</code> attribute will be checked for text inclusion. Form buttons will also be searched by name.</p>
<p>To narrow down the results you can specify a context in second parameter.</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">I</span>.click(<span class="hljs-string">'Login'</span>, <span class="hljs-string">'.nav'</span>); <span class="hljs-comment">// search only in .nav</span>
<span class="hljs-built_in">I</span>.click(<span class="hljs-string">'Login'</span>, {<span class="hljs-attr">css</span>: <span class="hljs-string">'footer'</span>}); <span class="hljs-comment">// search only in footer</span>
</code></pre>
<p>To skip the global search pass exact strict locator (or start locator with <code>//</code> or <code>.</code> or <code>#</code>).
In this case you are not limited to buttons and links. Any element found by that locator is clicked.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// click element by CSS</span>
<span class="hljs-built_in">I</span>.click(<span class="hljs-string">'#signup'</span>);
<span class="hljs-comment">// click element located by name inside a form</span>
<span class="hljs-built_in">I</span>.click({<span class="hljs-attr">name</span>: <span class="hljs-string">'submit'</span>}, <span class="hljs-string">'#user&gt;form'</span>);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="filling-fields"></a><a href="#filling-fields" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Filling Fields</h2>
<p>Clicking the links is not what takes the most time during testing a web site. If your site consists only of links you can skip test automation. The most routine waste of time goes into the testing of forms. CodeceptJS provides several ways of doing that.</p>
<p>Let's submit this sample form for a test:</p>
<pre><code class="hljs css language-html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"/update"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"update_form"</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"user_name"</span>&gt;</span>Name<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"user[name]"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user_name"</span> /&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"user_email"</span>&gt;</span>Email<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"user[email]"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user_email"</span> /&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"user_gender"</span>&gt;</span>Gender<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"user_gender"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"user[gender]"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"m"</span>&gt;</span>Male<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"f"</span>&gt;</span>Female<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"submitButton"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Update"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<p>We need to fill in all those fields and click &quot;Update&quot; button. CodeceptJS matches form elements by their label, name, or by CSS or XPath locators.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// we are using label to match user_name field</span>
<span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'Name'</span>, <span class="hljs-string">'Miles'</span>);
<span class="hljs-comment">// we can use input name</span>
<span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'user[email]'</span>,<span class="hljs-string">'miles@davis.com'</span>);
<span class="hljs-comment">// select element by label, choose option by text</span>
<span class="hljs-built_in">I</span>.selectOption(<span class="hljs-string">'Gender'</span>,<span class="hljs-string">'Male'</span>);
<span class="hljs-comment">// click 'Update' button, found by text</span>
<span class="hljs-built_in">I</span>.click(<span class="hljs-string">'Update'</span>);
</code></pre>
<p>Alternative scenario:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// we are using CSS</span>
<span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'#user_name'</span>, <span class="hljs-string">'Miles'</span>);
<span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'#user_email'</span>,<span class="hljs-string">'miles@davis.com'</span>);
<span class="hljs-comment">// select element by label, option by value</span>
<span class="hljs-built_in">I</span>.selectOption(<span class="hljs-string">'#user_gender'</span>,<span class="hljs-string">'m'</span>);
<span class="hljs-comment">// click 'Update' button, found by name</span>
<span class="hljs-built_in">I</span>.click(<span class="hljs-string">'submitButton'</span>, <span class="hljs-string">'#update_form'</span>);
</code></pre>
<p>To fill in sensitive data use <code>secret</code> function:</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'password'</span>, secret(<span class="hljs-string">'123456'</span>));
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="assertions"></a><a href="#assertions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Assertions</h2>
<p>In order to verify the expected behavior of a web application, web page connects should be checked.
CodeceptJS provides built-in assertions for that. They start with <code>see</code> (or <code>dontSee</code>) prefix, as they describe user's current vision.</p>
<p>The most general and common assertion is <code>see</code>:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// Just a visible text on a page</span>
<span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Hello'</span>);
<span class="hljs-comment">// text inside .msg element</span>
<span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Hello'</span>, <span class="hljs-string">'.msg'</span>);
<span class="hljs-comment">// opposite</span>
<span class="hljs-built_in">I</span>.dontSee(<span class="hljs-string">'Bye'</span>);
</code></pre>
<p>You should provide a text as first argument, and optionally a locator to narrow the search context.</p>
<p>You can check that specific element exists (or not) on a page, as it was described in <a href="#locating-element">Locating Element</a> section.</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">I</span>.seeElement(<span class="hljs-string">'.notice'</span>);
<span class="hljs-built_in">I</span>.dontSeeElement(<span class="hljs-string">'.error'</span>);
</code></pre>
<p>Additional assertions:</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">I</span>.seeInCurrentUrl(<span class="hljs-string">'/user/miles'</span>);
<span class="hljs-built_in">I</span>.seeInField(<span class="hljs-string">'user[name]'</span>, <span class="hljs-string">'Miles'</span>);
<span class="hljs-built_in">I</span>.seeInTitle(<span class="hljs-string">'My Website'</span>);
</code></pre>
<p>To see all possible assertions see the helper's reference.</p>
<h2><a class="anchor" aria-hidden="true" id="grabbing"></a><a href="#grabbing" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Grabbing</h2>
<p>Sometimes you need to retrieve a data from a page to use it in next steps of a scenario.
Imagine, application generates a password and you want to ensure that user can login using this password.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'login with generated password'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-built_in">I</span>) =&gt; {
  <span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'email'</span>, <span class="hljs-string">'miles@davis.com'</span>);
  <span class="hljs-built_in">I</span>.click(<span class="hljs-string">'Generate Password'</span>);
  <span class="hljs-keyword">const</span> password = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.grabTextFrom(<span class="hljs-string">'#password'</span>);
  <span class="hljs-built_in">I</span>.click(<span class="hljs-string">'Login'</span>);
  <span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'email'</span>, <span class="hljs-string">'miles@davis.com'</span>);
  <span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'password'</span>, password);
  <span class="hljs-built_in">I</span>.click(<span class="hljs-string">'Log in!'</span>);
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Hello, Miles'</span>);
});
</code></pre>
<p><code>grabTextFrom</code> action is used here to retrieve text from an element. All actions starting with <code>grab</code> prefix are expected to return data. In order to synchronize this step with a scenario you should pause test execution with <code>await</code> keyword of ES6. To make it work your test should be written inside a async function (notice <code>async</code> in its definition).</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'use page title'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-built_in">I</span>) =&gt; {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-keyword">const</span> password = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.grabTextFrom(<span class="hljs-string">'#password'</span>);
  <span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'password'</span>, password);
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="waiting"></a><a href="#waiting" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Waiting</h2>
<p>In modern web applications rendering is happen on client side.
Sometimes that may cause delays. A test may fail while trying to click an element which has not appeared on a page yet.
To handle this cases <code>wait*</code> methods introduced.</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">I</span>.waitForElement(<span class="hljs-string">'#agree_button'</span>, <span class="hljs-number">30</span>); <span class="hljs-comment">// secs</span>
<span class="hljs-comment">// clicks a button only when it is visible</span>
<span class="hljs-built_in">I</span>.click(<span class="hljs-string">'#agree_button'</span>);
</code></pre>
<p>More wait actions can be found in helper's reference.</p>
<h2><a class="anchor" aria-hidden="true" id="smartwait"></a><a href="#smartwait" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>SmartWait</h2>
<p>It is possible to wait for elements pragmatically. If a test uses element which is not on a page yet, CodeceptJS will wait for few extra seconds before failing. This feature is based on <a href="http://www.seleniumhq.org/docs/04_webdriver_advanced.jsp#implicit-waits">Implicit Wait</a> of Selenium. CodeceptJS enables implicit wait only when searching for a specific element and disables in all other cases. Thus, the performance of a test is not affected.</p>
<p>SmartWait can be enabled by setting wait option in WebDriver config.
Add <code>&quot;smartWait&quot;: 5000</code> to wait for additional 5s.</p>
<p>SmartWait works with a CSS/XPath locators in <code>click</code>, <code>seeElement</code> and other methods. See where it is enabled and where is not:</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">I</span>.click(<span class="hljs-string">'Login'</span>); <span class="hljs-comment">// DISABLED, not a locator</span>
<span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'user'</span>, <span class="hljs-string">'davert'</span>); <span class="hljs-comment">// DISABLED, not a specific locator</span>
<span class="hljs-built_in">I</span>.fillField({<span class="hljs-attr">name</span>: <span class="hljs-string">'password'</span>}, <span class="hljs-string">'123456'</span>); <span class="hljs-comment">// ENABLED, strict locator</span>
<span class="hljs-built_in">I</span>.click(<span class="hljs-string">'#login'</span>); <span class="hljs-comment">// ENABLED, locator is CSS ID</span>
<span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Hello, Davert'</span>); <span class="hljs-comment">// DISABLED, Not a locator</span>
<span class="hljs-built_in">I</span>.seeElement(<span class="hljs-string">'#userbar'</span>); <span class="hljs-comment">// ENABLED</span>
<span class="hljs-built_in">I</span>.dontSeeElement(<span class="hljs-string">'#login'</span>); <span class="hljs-comment">// DISABLED, can't wait for element to hide</span>
<span class="hljs-built_in">I</span>.seeNumberOfElements(<span class="hljs-string">'button.link'</span>, <span class="hljs-number">5</span>); <span class="hljs-comment">// DISABLED, can wait only for one element</span>

</code></pre>
<p>SmartWait doesn't check element for visibility, so tests may fail even element is on a page.</p>
<p>Usage example:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// we use smartWait: 5000 instead of</span>
<span class="hljs-comment">// I.waitForElement('#click-me', 5);</span>
<span class="hljs-comment">// to wait for element on page</span>
<span class="hljs-built_in">I</span>.click(<span class="hljs-string">'#click-me'</span>);
</code></pre>
<p>If it's hard to define what to wait, it is recommended to use <a href="https://codecept.io/basics/#retries">retries</a> to rerun flaky steps.</p>
<h2><a class="anchor" aria-hidden="true" id="iframes"></a><a href="#iframes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>IFrames</h2>
<p><a href="/basics/#within">within</a> operator can be used to work inside IFrames. Special <code>frame</code> locator is required to locate the iframe and get into its context.</p>
<p>See example:</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">within</span>({<span class="hljs-attr">frame</span>: <span class="hljs-string">"#editor"</span>}, () =&gt; {
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Page'</span>);
});
</code></pre>
<p>Nested IFrames can be set by passing array <em>(WebDriver, Nightmare &amp; Puppeteer only)</em>:</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">within</span>({<span class="hljs-attr">frame</span>: [<span class="hljs-string">".content"</span>, <span class="hljs-string">"#editor"</span>]}, () =&gt; {
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Page'</span>);
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="auto-login"></a><a href="#auto-login" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Auto Login</h2>
<p>To share the same user session across different tests CodeceptJS provides <a href="https://codecept.io/plugins#autologin">autoLogin plugin</a>. It simplifies login management and reduces time consuming login operations. Instead of filling in login form before each test it saves the cookies of a valid user session and reuses it for next tests. If a session expires or doesn't exist, logs in a user again.</p>
<p>This plugin requires some configuration but is very simple in use:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'do something with logged in user'</span>, (<span class="hljs-built_in">I</span>, login)) =&gt; {
  login(<span class="hljs-string">'user'</span>);
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Dashboard'</span>,<span class="hljs-string">'h1'</span>);
});
</code></pre>
<p>With <code>autoLogin</code> plugin you can save cookies into a file and reuse same session on different runs.</p>
<blockquote>
<p>Read more about setting up <a href="https://codecept.io/plugins#autologin">autoLogin</a></p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="multiple-sessions"></a><a href="#multiple-sessions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiple Sessions</h2>
<p>CodeceptJS allows to run several browser sessions inside a test. This can be useful for testing communication between users inside a system, for instance in chats. To open another browser use <code>session()</code> function as shown in example:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'test app'</span>, (<span class="hljs-built_in">I</span>) =&gt; {
  <span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/chat'</span>);
  <span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'name'</span>, <span class="hljs-string">'davert'</span>);
  <span class="hljs-built_in">I</span>.click(<span class="hljs-string">'Sign In'</span>);
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Hello, davert'</span>);
  <span class="hljs-built_in">session</span>(<span class="hljs-string">'john'</span>, () =&gt; {
    <span class="hljs-comment">// another session started</span>
    <span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/chat'</span>);
    <span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'name'</span>, <span class="hljs-string">'john'</span>);
    <span class="hljs-built_in">I</span>.click(<span class="hljs-string">'Sign In'</span>);
    <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Hello, john'</span>);
  });
  <span class="hljs-comment">// switching back to default session</span>
  <span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'message'</span>, <span class="hljs-string">'Hi, john'</span>);
  <span class="hljs-comment">// there is a message from current user</span>
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'me: Hi, john'</span>, <span class="hljs-string">'.messages'</span>);
  <span class="hljs-built_in">session</span>(<span class="hljs-string">'john'</span>, () =&gt; {
    <span class="hljs-comment">// let's check if john received it</span>
    <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'davert: Hi, john'</span>, <span class="hljs-string">'.messages'</span>);
  });
});
</code></pre>
<p><code>session</code> function expects a first parameter to be a name of a session. You can switch back to session by using the same name.</p>
<p>You can override config for session by passing second parameter:</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">session</span>(<span class="hljs-string">'john'</span>, { <span class="hljs-attr">browser</span>: <span class="hljs-string">'firefox'</span> } , () =&gt; {
  <span class="hljs-comment">// run this steps in firefox</span>
  <span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/'</span>);
});
</code></pre>
<p>or just start session without switching to it. Call <code>session</code> passing only its name:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'test'</span>, (<span class="hljs-built_in">I</span>) =&gt; {
  <span class="hljs-comment">// opens 3 additional browsers</span>
  <span class="hljs-built_in">session</span>(<span class="hljs-string">'john'</span>);
  <span class="hljs-built_in">session</span>(<span class="hljs-string">'mary'</span>);
  <span class="hljs-built_in">session</span>(<span class="hljs-string">'jane'</span>);

  <span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/'</span>);

  <span class="hljs-comment">// switch to session by its name</span>
  <span class="hljs-built_in">session</span>(<span class="hljs-string">'mary'</span>, () =&gt; {
    <span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/login'</span>);
  });
}
</code></pre>
<p><code>session</code> can return value which can be used in scenario:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// inside async function</span>
<span class="hljs-keyword">const</span> val = <span class="hljs-keyword">await</span> <span class="hljs-built_in">session</span>(<span class="hljs-string">'john'</span>, () =&gt; {
  <span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/info'</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">I</span>.grabTextFrom({ <span class="hljs-attr">css</span>: <span class="hljs-string">'h1'</span> });
});
<span class="hljs-built_in">I</span>.fillField(<span class="hljs-string">'Description'</span>, val);
</code></pre>
<p>Function passed into session can use <code>I</code>, page objects, and any objects declared for the scenario.
This function can also be declared as async (but doesn't work as generator).</p>
<p>Also, you can use <code>within</code> inside a session but you can't call session from inside <code>within</code>.</p>
<h2><a class="anchor" aria-hidden="true" id="multiple-windows"></a><a href="#multiple-windows" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiple Windows</h2>
<p>CodeceptJS allows to use several browser windows inside a test. Sometimes we are testing the functionality of websites that we cannot control, such as a closed-source managed package, and there are popups that either remain open for configuring data on the screen, or close as a result of clicking a window. We can use these functions in order to gain more control over which page is being tested with Codecept at any given time. For example:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">const</span> assert = <span class="hljs-built_in">require</span>(<span class="hljs-string">'assert'</span>);

<span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'should open main page of configured site, open a popup, switch to main page, then switch to popup, close popup, and go back to main page'</span>, <span class="hljs-keyword">async</span> (<span class="hljs-built_in">I</span>) =&gt; {
    <span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">const</span> handleBeforePopup = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.grabCurrentWindowHandle();
    <span class="hljs-keyword">const</span> urlBeforePopup = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.grabCurrentUrl();
    <span class="hljs-keyword">const</span> allHandlesBeforePopup = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.grabAllWindowHandles();
    assert.equal(allHandlesBeforePopup.length, <span class="hljs-number">1</span>, <span class="hljs-string">'Single Window'</span>);

    <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.executeScript(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-built_in">window</span>.open(<span class="hljs-string">'https://www.w3schools.com/'</span>, <span class="hljs-string">'new window'</span>, <span class="hljs-string">'toolbar=yes,scrollbars=yes,resizable=yes,width=400,height=400'</span>);
    });

    <span class="hljs-keyword">const</span> allHandlesAfterPopup = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.grabAllWindowHandles();    
    assert.equal(allHandlesAfterPopup.length, <span class="hljs-number">2</span>, <span class="hljs-string">'Two Windows'</span>);

    <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.switchToWindow(allHandlesAfterPopup[<span class="hljs-number">1</span>]);
    <span class="hljs-keyword">const</span> urlAfterPopup = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.grabCurrentUrl();    
    assert.equal(urlAfterPopup, <span class="hljs-string">'https://www.w3schools.com/'</span>, <span class="hljs-string">'Expected URL: Popup'</span>);
    
    assert.equal(handleBeforePopup, allHandlesAfterPopup[<span class="hljs-number">0</span>], <span class="hljs-string">'Expected Window: Main Window'</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.switchToWindow(handleBeforePopup);
    <span class="hljs-keyword">const</span> currentURL = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.grabCurrentUrl();
    assert.equal(currentURL, urlBeforePopup, <span class="hljs-string">'Expected URL: Main URL'</span>);    

    <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.switchToWindow(allHandlesAfterPopup[<span class="hljs-number">1</span>]);
    <span class="hljs-keyword">const</span> urlAfterSwitchBack = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.grabCurrentUrl();
    assert.equal(urlAfterSwitchBack, <span class="hljs-string">'https://www.w3schools.com/'</span>, <span class="hljs-string">'Expected URL: Popup'</span>);        
    <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.closeCurrentTab();

    <span class="hljs-keyword">const</span> allHandlesAfterPopupClosed = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.grabAllWindowHandles();    
    assert.equal(allHandlesAfterPopupClosed.length, <span class="hljs-number">1</span>, <span class="hljs-string">'Single Window'</span>);
    <span class="hljs-keyword">const</span> currentWindowHandle = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.grabCurrentWindowHandle();    
    assert.equal(currentWindowHandle, allHandlesAfterPopup[<span class="hljs-number">0</span>], <span class="hljs-string">'Expected Window: Main Window'</span>);

}).tag(<span class="hljs-string">'@ProofOfConcept'</span>).tag(<span class="hljs-string">'@grabAllWindowHandles'</span>).tag(<span class="hljs-string">'@grabCurrentWindowHandle'</span>).tag(<span class="hljs-string">'@switchToWindow'</span>);
</code></pre>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 6/13/2019</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#locating-element">Locating Element</a></li><li><a href="#clicking">Clicking</a></li><li><a href="#filling-fields">Filling Fields</a></li><li><a href="#assertions">Assertions</a></li><li><a href="#grabbing">Grabbing</a></li><li><a href="#waiting">Waiting</a></li><li><a href="#smartwait">SmartWait</a></li><li><a href="#iframes">IFrames</a></li><li><a href="#auto-login">Auto Login</a></li><li><a href="#multiple-sessions">Multiple Sessions</a></li><li><a href="#multiple-windows">Multiple Windows</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.svg" alt="CodeceptJS" width="66" height="58"/></a><div><h5>Docs</h5><a href="/quickstart">QuickStart</a><a href="/basics">Guides</a><a href="/reference">Reference</a></div><div><h5>Community</h5><a href="https://join.slack.com/t/codeceptjs/shared_invite/enQtMzA5OTM4NDM2MzA4LWE4MThhN2NmYTgxNTU5MTc4YzAyYWMwY2JkMmZlYWI5MWQ2MDM5MmRmYzZmYmNiNmY5NTAzM2EwMGIwOTNhOGQ">Slack Chat</a><a href="https://codecept.discourse.group" target="_blank" rel="noreferrer noopener">Community Forum</a><a href="http://stackoverflow.com/questions/tagged/codeceptjs" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/codeceptjs" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://github.com/Codeception/CodeceptJS">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/codeception/codeceptjs/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&amp;utm_medium=footer&amp;utm_term=link&amp;utm_campaign=reference">Commercial Support</a><a href="http://sdclabs.com/trainings/web-automation-codeceptjs?utm_source=codecept.io&amp;utm_medium=top_menu&amp;utm_term=link&amp;utm_campaign=reference">Trainings</a></div></section><section class="copyright">Copyright © 2019 CodeceptJS</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0cc13a0af567a05fc38790be681b1491',
                indexName: 'codecept',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>