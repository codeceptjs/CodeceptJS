<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Testing with Protractor · CodeceptJS</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;protractor-testing-with-codeceptjs&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#protractor-testing-with-codeceptjs&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Protractor Testing with CodeceptJS&lt;/h1&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Testing with Protractor · CodeceptJS"/><meta property="og:type" content="website"/><meta property="og:url" content="https://codecept.io/index.html"/><meta property="og:description" content="&lt;h1&gt;&lt;a class=&quot;anchor&quot; aria-hidden=&quot;true&quot; id=&quot;protractor-testing-with-codeceptjs&quot;&gt;&lt;/a&gt;&lt;a href=&quot;#protractor-testing-with-codeceptjs&quot; aria-hidden=&quot;true&quot; class=&quot;hash-link&quot;&gt;&lt;svg class=&quot;hash-link-icon&quot; aria-hidden=&quot;true&quot; height=&quot;16&quot; version=&quot;1.1&quot; viewBox=&quot;0 0 16 16&quot; width=&quot;16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Protractor Testing with CodeceptJS&lt;/h1&gt;
"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg" alt="CodeceptJS"/><h2 class="headerTitleWithLogo">CodeceptJS</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/quickstart" target="_self">Quickstart</a></li><li class="siteNavGroupActive"><a href="/basics" target="_self">Guides</a></li><li class=""><a href="/reference" target="_self">Reference</a></li><li class=""><a href="/changelog" target="_self">Releases</a></li><li class=""><a href="/help" target="_self">Support</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Web Testing</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Quickstart</h3><ul><li class="navListItem"><a class="navItem" href="/quickstart">Quickstart</a></li><li class="navListItem"><a class="navItem" href="/basics">Basics</a></li><li class="navListItem"><a class="navItem" href="/video">Tutorial Videos</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Web Testing</h3><ul><li class="navListItem"><a class="navItem" href="/acceptance">Acceptance Testing</a></li><li class="navListItem"><a class="navItem" href="/puppeteer">Testing with Puppeteer</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/angular">Testing with Protractor</a></li><li class="navListItem"><a class="navItem" href="/nightmare">Testing with Nightmare</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Mobile Testing</h3><ul><li class="navListItem"><a class="navItem" href="/mobile">Mobile Testing with Appium</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Organizing Tests</h3><ul><li class="navListItem"><a class="navItem" href="/helpers">Custom Helpers</a></li><li class="navListItem"><a class="navItem" href="/pageobjects">Reusing Code with Page Objects</a></li><li class="navListItem"><a class="navItem" href="/bdd">Behavior Driven Development</a></li><li class="navListItem"><a class="navItem" href="/data">Data Management</a></li><li class="navListItem"><a class="navItem" href="/hooks">Bootstrap / Teardown / Plugins</a></li><li class="navListItem"><a class="navItem" href="/advanced">Advanced Usage</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/Codeception/CodeceptJS/blob/master/docs/angular.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">Testing with Protractor</h1></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="protractor-testing-with-codeceptjs"></a><a href="#protractor-testing-with-codeceptjs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Protractor Testing with CodeceptJS</h1>
<h2><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<p>CodeceptJS is an acceptance testing framework. In diversified world of JavaScript testing libraries it aims to create a unified high level API for end-to-end testing, powered by different backends.
CodeceptJS allows you to write a test and switch in config execution drivers: will it be <em>wedriverio</em>, <em>puppeteer</em>, or <em>protractor</em> depends on you.
This way you aren't be bound to implementation, and your acceptance tests will work no matter of framework running them.</p>
<p>As you know, <a href="http://www.protractortest.org/#/">Protractor</a> is an official tool for testing AngularJS applications.
CodeceptJS should not be considered as alternative to Protractor but a testing framework utilizing this powerful library.</p>
<p><img src="https://codecept.io/img/angular-protractor.png" alt="angular-protractor"></p>
<p>So there is no magic in testing of AngularJS application in CodeceptJS.
You just execute regular Protractor commands, packed in a simple high-level API.</p>
<p><img src="https://codecept.io/img/todo.png" alt="todo-mvc"></p>
<p>As an example we will use popular <a href="http://todomvc.com/examples/angularjs/#/">TodoMVC application</a>.
How would we test creating a new todo item in CodeceptJS?</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'create todo item'</span>, (<span class="hljs-built_in">I</span>) =&gt; {
  <span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/'</span>);
  <span class="hljs-built_in">I</span>.dontSeeElement(<span class="hljs-string">'#todo-count'</span>);
  <span class="hljs-built_in">I</span>.fillField({<span class="hljs-attr">model</span>: <span class="hljs-string">'newTodo'</span>}, <span class="hljs-string">'Write a guide'</span>);
  <span class="hljs-built_in">I</span>.pressKey(<span class="hljs-string">'Enter'</span>);
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Write a guide'</span>, {<span class="hljs-attr">repeater</span>: <span class="hljs-string">"todo in todos"</span>});
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'1 item left'</span>, <span class="hljs-string">'#todo-count'</span>);
});
</code></pre>
<p>The similar test written in native syntax of Protractor (inherited from selenium-webdriver) would look like this:</p>
<pre><code class="hljs css language-js">it(<span class="hljs-string">'should create todo item'</span>, (<span class="hljs-built_in">I</span>) =&gt; {
  browser.get(<span class="hljs-string">"http://todomvc.com/examples/angularjs/#/"</span>);
  expect(element(by.css(<span class="hljs-string">"#todo-count"</span>)).isPresent()).toBeFalsy();
  <span class="hljs-keyword">var</span> inputField = element(by.model(<span class="hljs-string">"newTodo"</span>));
  inputField.sendKeys(<span class="hljs-string">"Write a guide"</span>);
  inputField.sendKeys(protractor.Key.ENTER);
  <span class="hljs-keyword">var</span> todos = element.all(by.repeater(<span class="hljs-string">"todo in todos"</span>));
  expect(todos.last().getText()).toEqual(<span class="hljs-string">"Write a guide"</span>));
  element(by.css(<span class="hljs-string">"#todo-count"</span>)).getText()).toContain(<span class="hljs-string">'1 items left'</span>);
});
</code></pre>
<p>Comparing to the API proposed by CodeceptJS, this code looks a bit more complicated.
But what the more important, it's really really hard to read and follow its logic.
Readability is the most crucial part in acceptance testing.
You should easily change tests when changes specification or design.
Probably, only a person who writes Protractor tests in your company,
could do those changes, while CodeceptJS allows anyone to work with tests.
Contrary, CodeceptJS provides CodeceptJS provides scenario-driven approach, so test is just a step-by-step representation of real user actions.
This way you can easily read, and follow test scenario, and edit it when you need it to be changed.</p>
<p>In this way CodeceptJS is more similar to Cucumber, so if you run a test with <code>--steps</code> option you will see this output:</p>
<pre><code class="hljs css language-bash">TodoMvc --
 create todo item
 • I am on page <span class="hljs-string">"/"</span>
 • I dont see element <span class="hljs-string">"#todo-count"</span>
 • I fill field {<span class="hljs-string">"model"</span>:<span class="hljs-string">"newTodo"</span>}, <span class="hljs-string">"Write a guide"</span>
 • I press key <span class="hljs-string">"Enter"</span>
 • I see <span class="hljs-string">"Write a guide"</span>, {<span class="hljs-string">"repeater"</span>:<span class="hljs-string">"todo in todos"</span>}
 • I see <span class="hljs-string">"1 item left"</span>, <span class="hljs-string">"#todo-count"</span>
 ✓ OK <span class="hljs-keyword">in</span> 968ms
</code></pre>
<p>Unlike Cucumber, CodeceptJS is not about writing test scenarios above for business rules.
To say it again, its <strong>goal is to provide standard action steps you can use for testing applications</strong>.
Surely, it can't cover 100% of cases but it aims for 90%, for others you can write your own steps inside a <a href="http://codecept.io/helpers/">custom Helper</a> using API of Protractor</p>
<h3><a class="anchor" aria-hidden="true" id="setting-up-codeceptjs-with-protractor"></a><a href="#setting-up-codeceptjs-with-protractor" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setting up CodeceptJS with Protractor</h3>
<p>To start using CodeceptJS you will need to install it via NPM and initialize it in directory with tests.</p>
<pre><code class="hljs css language-bash">npm install -g codeceptjs
codeceptjs init
</code></pre>
<p>You will be asked questions about initial configuration, make sure you select Protractor helper.
If you didn't have Protractor library it <strong>will be installed</strong>.
Please agree to extend steps, and use <code>http://todomvc.com/examples/angularjs/</code> as a url for Protractor helper.</p>
<p>For TodoMVC application you will have following config created in <code>codecept.conf.js</code> file:</p>
<pre><code class="hljs css language-js">exports.config = { <span class="hljs-attr">tests</span>: <span class="hljs-string">'./*_test.js'</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,
  <span class="hljs-attr">output</span>: <span class="hljs-string">'./output'</span>,
  <span class="hljs-attr">helpers</span>:
   { <span class="hljs-attr">Protractor</span>:
      { <span class="hljs-attr">url</span>: <span class="hljs-string">'http://todomvc.com/examples/angularjs/'</span>,
        <span class="hljs-attr">driver</span>: <span class="hljs-string">'hosted'</span>,
        <span class="hljs-attr">browser</span>: <span class="hljs-string">'chrome'</span>,
        <span class="hljs-attr">rootElement</span>: <span class="hljs-string">'body'</span> } },
  <span class="hljs-attr">include</span>: { <span class="hljs-attr">I</span>: <span class="hljs-string">'./steps_file.js'</span> },
  <span class="hljs-attr">bootstrap</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">mocha</span>: {},
  <span class="hljs-attr">name</span>: <span class="hljs-string">'todoangular'</span> }
</code></pre>
<p>First test can be generated with <code>gt</code> command:</p>
<pre><code class="hljs css language-bash">codeceptjs gt
</code></pre>
<p>After that you can start writing your first CodeceptJS/Angular tests.
Please look into the reference of <a href="http://codecept.io/helpers/Protractor/">Protractor helper</a> for all available actions.
You can also run <code>list</code> command to see methods of I:</p>
<pre><code class="hljs css language-bash">codeceptjs list
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="testing-non-angular-applications"></a><a href="#testing-non-angular-applications" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing non-Angular Applications</h2>
<p>Sure, Protractor can be used to test applications built without AngularJS. In this case you need to disable angular synchronization feature in config:</p>
<pre><code class="hljs css language-js"><span class="hljs-string">"helpers"</span>: {
  <span class="hljs-string">"Protractor"</span>: {
    <span class="hljs-string">"url"</span>: <span class="hljs-string">"http://todomvc.com/examples/angularjs/"</span>,
    <span class="hljs-string">"driver"</span>: <span class="hljs-string">"hosted"</span>,
    <span class="hljs-string">"browser"</span>: <span class="hljs-string">"firefox"</span>,
    <span class="hljs-string">"angular"</span>: <span class="hljs-literal">false</span>
  }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="writing-first-test"></a><a href="#writing-first-test" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Writing First Test</h2>
<p>Test scenario should always use <code>I</code> object to execute commands.
This is important as all methods of <code>I</code> are running in global promise chain, this way CodeceptJS makes sure everything is executed in right order.
At first a page should be opened to proceed, we use <code>amOnPage</code> command for that. As we already specified full URL to TodoMVC app,
we can pass relative path into it instead of absolute url:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">Feature</span>(<span class="hljs-string">'Todo MVC'</span>);

<span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'create todo item'</span>, (<span class="hljs-built_in">I</span>) =&gt; {
  <span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/'</span>);
});
</code></pre>
<p>All scenarios should describe actions on site and assertions taken in the end. In CodeceptJS assertion commands have <code>see</code> or <code>dontSee</code> prefix:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">Feature</span>(<span class="hljs-string">'Todo MVC'</span>);

<span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'create todo item'</span>, (<span class="hljs-built_in">I</span>) =&gt; {
  <span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/'</span>);
  <span class="hljs-built_in">I</span>.dontSeeElement(<span class="hljs-string">'#todo-count'</span>);
});
</code></pre>
<p>A test can be executed with <code>run</code> command, we recommend to use <code>--steps</code> options to follow step-by-step execution:</p>
<pre><code class="hljs css language-sh">$ codeceptjs run --steps

CodeceptJS 1.2.0
Test root is assumed to be /home/davert/demos/todoangular
Using the selenium server at http://localhost:4444/wd/hub

TodoMvc --
 create todo item
 • I am on page <span class="hljs-string">"/"</span>
 • I dont see element <span class="hljs-string">"#todo-count"</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="running-several-scenarios"></a><a href="#running-several-scenarios" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Running Several Scenarios</h2>
<p>By writing a test in similar manner we will have a test shown in the beginning of this guide. Probably we would like not to finish with one test,
but have more, for testing editing of todo items, checking todo items, and more.</p>
<p>Let's prepare our test for multiple scenarios. All test scenarios will need to open main page of application, so <code>amOnPage</code> can be moved into the <code>Before</code> hook:
Scenarios will probably deal with created todo items, so we can move logic of crating new todo into a function.</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">Feature</span>(<span class="hljs-string">'TodoMvc'</span>);

<span class="hljs-keyword">Before</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-built_in">I</span></span>) =&gt;</span> {
  <span class="hljs-built_in">I</span>.amOnPage(<span class="hljs-string">'/'</span>);
});

<span class="hljs-keyword">const</span> createTodo = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">I, name</span>) </span>{
  <span class="hljs-built_in">I</span>.fillField({<span class="hljs-attr">model</span>: <span class="hljs-string">'newTodo'</span>}, name);
  <span class="hljs-built_in">I</span>.pressKey(<span class="hljs-string">'Enter'</span>);
}

<span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'create todo item'</span>, (<span class="hljs-built_in">I</span>) =&gt; {
  <span class="hljs-built_in">I</span>.dontSeeElement(<span class="hljs-string">'#todo-count'</span>);
  createTodo(<span class="hljs-built_in">I</span>, <span class="hljs-string">'Write a guide'</span>);
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Write a guide'</span>, {<span class="hljs-attr">repeater</span>: <span class="hljs-string">"todo in todos"</span>});
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'1 item left'</span>, <span class="hljs-string">'#todo-count'</span>);
});
</code></pre>
<p>and so we can add even more tests!</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'edit todo'</span>, (<span class="hljs-built_in">I</span>) =&gt; {
  createTodo(<span class="hljs-built_in">I</span>, <span class="hljs-string">'write a review'</span>);
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'write a review'</span>, {<span class="hljs-attr">repeater</span>: <span class="hljs-string">"todo in todos"</span>});
  <span class="hljs-built_in">I</span>.doubleClick(<span class="hljs-string">'write a review'</span>);
  <span class="hljs-built_in">I</span>.pressKey([<span class="hljs-string">'Control'</span>, <span class="hljs-string">'a'</span>]);
  <span class="hljs-built_in">I</span>.pressKey(<span class="hljs-string">'write old review'</span>);
  <span class="hljs-built_in">I</span>.pressKey(<span class="hljs-string">'Enter'</span>);
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'write old review'</span>, {<span class="hljs-attr">repeater</span>: <span class="hljs-string">"todo in todos"</span>});
});

<span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'check todo item'</span>, (<span class="hljs-built_in">I</span>) =&gt; {
  createTodo(<span class="hljs-built_in">I</span>, <span class="hljs-string">'my new item'</span>);
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'1 item left'</span>, <span class="hljs-string">'#todo-count'</span>);
  <span class="hljs-built_in">I</span>.checkOption({<span class="hljs-attr">model</span>: <span class="hljs-string">'todo.completed'</span>});
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'0 items left'</span>, <span class="hljs-string">'#todo-count'</span>);
});
</code></pre>
<blockquote>
<p>This example is <a href="https://github.com/DavertMik/codeceptjs-angular-todomvc">available on GitHub</a>.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="locators"></a><a href="#locators" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Locators</h2>
<p>Like you may have noticed, CodeceptJS doesn't use <code>by.*</code> locators similar to Protractor or Selenium Webdriver.
Instead most of methods expect you to pass valid CSS or XPath. In case you don't want CodeceptJS to guess the type of locator,
you can specify them using so-called strict locators. This is an absolute analogy of <code>by</code>, so you can use angular specific locators (like models, repeaters, bindings, etc) in it:</p>
<pre><code class="hljs css language-sh">{css: <span class="hljs-string">'button'</span>}
{repeater: <span class="hljs-string">"todo in todos"</span>}
{binding: <span class="hljs-string">'latest'</span>}
</code></pre>
<p>When we deal with clicks, CodeceptJS can take a text and search a web page for a valid clickable element with that text.
So links and buttons can be searched by their text.</p>
<p>Same thing happens for form fields: they are searched by field names, labels, and so on.</p>
<p>Using such smart locators makes tests easy to write, however, searching an element by text is slower than using CSS|XPath and much slower than using strict locators.</p>
<h2><a class="anchor" aria-hidden="true" id="refactoring"></a><a href="#refactoring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Refactoring</h2>
<p>In previous examples, we've moved actions into <code>createTodo</code> function. Is there a more elegant way of refactoring?
Can we have something like <code>I.createTodo()</code> to be used in code? Sure, we can do so by editing <code>steps_file.js</code> created by init command.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// in this file you can append custom step methods to 'I' object</span>

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> actor({
    <span class="hljs-attr">createTodo</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">title</span>) </span>{
      <span class="hljs-keyword">this</span>.fillField({<span class="hljs-attr">model</span>: <span class="hljs-string">'newTodo'</span>}, title);
      <span class="hljs-keyword">this</span>.pressKey(<span class="hljs-string">'Enter'</span>);
    }
  });
}
</code></pre>
<p>And that's all, method is available to use as <code>I.createTodo(title)</code>:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">Scenario</span>(<span class="hljs-string">'create todo item'</span>, (<span class="hljs-built_in">I</span>) =&gt; {
  <span class="hljs-built_in">I</span>.dontSeeElement(<span class="hljs-string">'#todo-count'</span>);
  <span class="hljs-built_in">I</span>.createTodo(<span class="hljs-string">'Write a guide'</span>);
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'Write a guide'</span>, {<span class="hljs-attr">repeater</span>: <span class="hljs-string">"todo in todos"</span>});
  <span class="hljs-built_in">I</span>.see(<span class="hljs-string">'1 item left'</span>, <span class="hljs-string">'#todo-count'</span>);
});
</code></pre>
<p>To learn more about refactoring options in CodeceptJS read <a href="http://codecept.io/pageobjects/">PageObjects guide</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="multiple-sessions"></a><a href="#multiple-sessions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Multiple Sessions</h2>
<p>To run several browsers in one test see <a href="https://codecept.io/acceptance/#multiple-sessions">multiple session</a> chapter.</p>
<h2><a class="anchor" aria-hidden="true" id="extending"></a><a href="#extending" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Extending</h2>
<p>What if CodeceptJS doesn't provide some of Protractor functionality you actually need? Sure its API is to general,
and this case is possible. If you don't know how to do something with CodeceptJS - revert back to Protractor syntax!</p>
<p>Create custom helper, define methods for it, and use it inside the I object. Your Helper can access <code>browser</code> from Protractor
by accessing Protractor helper:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">let</span> browser = <span class="hljs-keyword">this</span>.helpers[<span class="hljs-string">'Protractor'</span>].browser;
</code></pre>
<p>or use global <code>element</code> and <code>by</code> variables to locate elements:</p>
<pre><code class="hljs css language-js">element.all(by.repeater(<span class="hljs-string">'result in memory'</span>));
</code></pre>
<p>This way we recommend to implement all custom logic using low-level Protractor syntax and using it inside scenario tests.
Please see an <a href="http://codecept.io/helpers/#protractor-example">example of such helper</a>.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-1-2</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/puppeteer"><span class="arrow-prev">← </span><span>Testing with Puppeteer</span></a><a class="docs-next button" href="/nightmare"><span>Testing with Nightmare</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#introduction">Introduction</a><ul class="toc-headings"><li><a href="#setting-up-codeceptjs-with-protractor">Setting up CodeceptJS with Protractor</a></li></ul></li><li><a href="#testing-non-angular-applications">Testing non-Angular Applications</a></li><li><a href="#writing-first-test">Writing First Test</a></li><li><a href="#running-several-scenarios">Running Several Scenarios</a></li><li><a href="#locators">Locators</a></li><li><a href="#refactoring">Refactoring</a></li><li><a href="#multiple-sessions">Multiple Sessions</a></li><li><a href="#extending">Extending</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.svg" alt="CodeceptJS" width="66" height="58"/></a><div><h5>Docs</h5><a href="/quickstart">QuickStart</a><a href="/basics">Guides</a><a href="/reference">Reference</a></div><div><h5>Community</h5><a href="https://join.slack.com/t/codeceptjs/shared_invite/enQtMzA5OTM4NDM2MzA4LTNiMTE5YzNlMjQyNWYwZjAzODE3ZTI1MmVkYjY0YTYyNDZmMWJjM2VlODg3NTQzYzM2OGE5ZmIwODFjODk1MzI">Slack Chat</a><a href="https://codecept.discourse.group" target="_blank" rel="noreferrer noopener">Community Forum</a><a href="http://stackoverflow.com/questions/tagged/codeceptjs" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/codeceptjs" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://github.com/Codeception/CodeceptJS">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/codeception/codeceptjs/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&amp;utm_medium=footer&amp;utm_term=link&amp;utm_campaign=reference">Commercial Support</a><a href="http://sdclabs.com/trainings/web-automation-codeceptjs?utm_source=codecept.io&amp;utm_medium=top_menu&amp;utm_term=link&amp;utm_campaign=reference">Trainings</a></div></section><section class="copyright">Copyright © 2019 CodeceptJS</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0cc13a0af567a05fc38790be681b1491',
                indexName: 'codecept',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>