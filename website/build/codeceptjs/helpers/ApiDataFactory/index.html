<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>ApiDataFactory · CodeceptJS</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;!-- Generated by documentation.js. Update this documentation by updating the source code. --&gt;"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="ApiDataFactory · CodeceptJS"/><meta property="og:type" content="website"/><meta property="og:url" content="https://codecept.io/index.html"/><meta property="og:description" content="&lt;!-- Generated by documentation.js. Update this documentation by updating the source code. --&gt;"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/favicon/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans"/><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.svg" alt="CodeceptJS"/><h2 class="headerTitleWithLogo">CodeceptJS</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/quickstart" target="_self">Quickstart</a></li><li class=""><a href="/basics" target="_self">Guides</a></li><li class=""><a href="/reference" target="_self">Reference</a></li><li class=""><a href="/changelog" target="_self">Releases</a></li><li class=""><a href="/help" target="_self">Support</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Data Helpers</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Reference</h3><ul><li class="navListItem"><a class="navItem" href="/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/commands">Commands</a></li><li class="navListItem"><a class="navItem" href="/plugins">Plugins</a></li><li class="navListItem"><a class="navItem" href="/locators">Locators</a></li><li class="navListItem"><a class="navItem" href="/docker">Docker</a></li><li class="navListItem"><a class="navItem" href="/translation">Translation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Driver Helpers</h3><ul><li class="navListItem"><a class="navItem" href="/helpers/WebDriver">WebDriver</a></li><li class="navListItem"><a class="navItem" href="/helpers/Puppeteer">Puppeteer</a></li><li class="navListItem"><a class="navItem" href="/helpers/Protractor">Protractor</a></li><li class="navListItem"><a class="navItem" href="/helpers/Nightmare">Nightmare</a></li><li class="navListItem"><a class="navItem" href="/helpers/Appium">Appium</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Data Helpers</h3><ul><li class="navListItem"><a class="navItem" href="/helpers/REST">REST</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/helpers/ApiDataFactory">ApiDataFactory</a></li><li class="navListItem"><a class="navItem" href="/helpers/FileSystem">FileSystem</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/Codeception/CodeceptJS/blob/master/docs/helpers/ApiDataFactory.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 class="postHeaderTitle">ApiDataFactory</h1></header><article><div><span><!-- Generated by documentation.js. Update this documentation by updating the source code. -->
<h2><a class="anchor" aria-hidden="true" id="apidatafactory"></a><a href="#apidatafactory" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ApiDataFactory</h2>
<p><strong>Extends Helper</strong></p>
<p>Helper for managing remote data using REST API.
Uses data generators like <a href="https://github.com/rosiejs/rosie">rosie</a> or factory girl to create new record.</p>
<p>By defining a factory you set the rules of how data is generated.
This data will be saved on server via REST API and deleted in the end of a test.</p>
<h2><a class="anchor" aria-hidden="true" id="use-case"></a><a href="#use-case" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Use Case</h2>
<p>Acceptance tests interact with a websites using UI and real browser.
There is no way to create data for a specific test other than from user interface.
That makes tests slow and fragile. Instead of testing a single feature you need to follow all creation/removal process.</p>
<p>This helper solves this problem.
Most of web application have API, and it can be used to create and delete test records.
By combining REST API with Factories you can easily create records for tests:</p>
<pre><code class="hljs css language-js"><span class="hljs-built_in">I</span>.have(<span class="hljs-string">'user'</span>, { <span class="hljs-attr">login</span>: <span class="hljs-string">'davert'</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">'davert@mail.com'</span> });
<span class="hljs-keyword">let</span> id = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.have(<span class="hljs-string">'post'</span>, { <span class="hljs-attr">title</span>: <span class="hljs-string">'My first post'</span>});
<span class="hljs-built_in">I</span>.haveMultiple(<span class="hljs-string">'comment'</span>, <span class="hljs-number">3</span>, {<span class="hljs-attr">post_id</span>: id});
</code></pre>
<p>To make this work you need</p>
<ol>
<li>REST API endpoint which allows to perform create / delete requests and</li>
<li>define data generation rules</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="setup"></a><a href="#setup" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Setup</h3>
<p>Install <a href="https://github.com/rosiejs/rosie">Rosie</a> and <a href="https://www.npmjs.com/package/faker">Faker</a> libraries.</p>
<pre><code class="hljs css language-sh">npm i rosie faker --save-dev`
</code></pre>
<p>Create a factory file for a resource.</p>
<p>See the example for Posts factories:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// tests/factories/posts.js</span>

<span class="hljs-keyword">var</span> Factory = <span class="hljs-built_in">require</span>(<span class="hljs-string">'rosie'</span>).Factory;
<span class="hljs-keyword">var</span> faker = <span class="hljs-built_in">require</span>(<span class="hljs-string">'faker'</span>);

<span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">new</span> Factory()
   <span class="hljs-comment">// no need to set id, it will be set by REST API</span>
   .attr(<span class="hljs-string">'author'</span>, () =&gt; faker.name.findName())
   .attr(<span class="hljs-string">'title'</span>, () =&gt; faker.lorem.sentence())
   .attr(<span class="hljs-string">'body'</span>, () =&gt; faker.lorem.paragraph());
</code></pre>
<p>For more options see <a href="https://github.com/rosiejs/rosie">rosie documentation</a>.</p>
<p>Then configure ApiDataHelper to match factories and REST API:</p>
<h3><a class="anchor" aria-hidden="true" id="configuration"></a><a href="#configuration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration</h3>
<p>ApiDataFactory has following config options:</p>
<ul>
<li><code>endpoint</code>: base URL for the API to send requests to.</li>
<li><code>cleanup</code> (default: true): should inserted records be deleted up after tests</li>
<li><code>factories</code>: list of defined factories</li>
<li><code>returnId</code> (default: false): return id instead of a complete response when creating items.</li>
<li><code>headers</code>: list of headers</li>
<li><code>REST</code>: configuration for REST requests</li>
</ul>
<p>See the example:</p>
<pre><code class="hljs css language-js"> ApiDataFactory: {
   <span class="hljs-attr">endpoint</span>: <span class="hljs-string">"http://user.com/api"</span>,
   <span class="hljs-attr">cleanup</span>: <span class="hljs-literal">true</span>,
   <span class="hljs-attr">headers</span>: {
     <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
     <span class="hljs-string">'Accept'</span>: <span class="hljs-string">'application/json'</span>,
   },
   <span class="hljs-attr">factories</span>: {
     <span class="hljs-attr">post</span>: {
       <span class="hljs-attr">uri</span>: <span class="hljs-string">"/posts"</span>,
       <span class="hljs-attr">factory</span>: <span class="hljs-string">"./factories/post"</span>,
     },
     <span class="hljs-attr">comment</span>: {
       <span class="hljs-attr">factory</span>: <span class="hljs-string">"./factories/comment"</span>,
       <span class="hljs-attr">create</span>: { <span class="hljs-attr">post</span>: <span class="hljs-string">"/comments/create"</span> },
       <span class="hljs-attr">delete</span>: { <span class="hljs-attr">post</span>: <span class="hljs-string">"/comments/delete/{id}"</span> },
       <span class="hljs-attr">fetchId</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> data.result.id
     }
   }
}
</code></pre>
<p>It is required to set REST API <code>endpoint</code> which is the baseURL for all API requests.
Factory file is expected to be passed via <code>factory</code> option.</p>
<p>This Helper uses <a href="http://codecept.io/helpers/REST/">REST</a> helper and accepts its configuration in &quot;REST&quot; section.
For instance, to set timeout you should add:</p>
<pre><code class="hljs css language-js"><span class="hljs-string">"ApiDataFactory"</span>: {
   <span class="hljs-string">"REST"</span>: {
     <span class="hljs-string">"timeout"</span>: <span class="hljs-string">"100000"</span>,
  }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="requests"></a><a href="#requests" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requests</h3>
<p>By default to create a record ApiDataFactory will use endpoint and plural factory name:</p>
<ul>
<li>create: <code>POST {endpoint}/{resource} data</code></li>
<li>delete: <code>DELETE {endpoint}/{resource}/id</code></li>
</ul>
<p>Example (<code>endpoint</code>: <code>http://app.com/api</code>):</p>
<ul>
<li>create: POST request to <code>http://app.com/api/users</code></li>
<li>delete: DELETE request to <code>http://app.com/api/users/1</code></li>
</ul>
<p>This behavior can be configured with following options:</p>
<ul>
<li><code>uri</code>: set different resource uri. Example: <code>uri: account</code> =&gt; <code>http://app.com/api/account</code>.</li>
<li><code>create</code>: override create options. Expected format: <code>{ method: uri }</code>. Example: <code>{ &quot;post&quot;: &quot;/users/create&quot; }</code></li>
<li><code>delete</code>: override delete options. Expected format: <code>{ method: uri }</code>. Example: <code>{ &quot;post&quot;: &quot;/users/delete/{id}&quot; }</code></li>
</ul>
<p>Create and delete requests can also be overridden with a function:</p>
<pre><code class="hljs css language-js">create: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
   <span class="hljs-keyword">return</span> { <span class="hljs-attr">method</span>: <span class="hljs-string">'post'</span>, <span class="hljs-attr">url</span>: <span class="hljs-string">'/posts'</span>, data }
},
<span class="hljs-attr">delete</span>: <span class="hljs-function">(<span class="hljs-params">id</span>) =&gt;</span> {
   <span class="hljs-keyword">return</span> { <span class="hljs-attr">method</span>: <span class="hljs-string">'delete'</span>, <span class="hljs-attr">url</span>: <span class="hljs-string">'/posts'</span>, <span class="hljs-attr">data</span>: { id } }
}
</code></pre>
<p>Requests can be updated on the fly by using <code>onRequest</code> function. For instance, you can pass in current session from a cookie.</p>
<pre><code class="hljs css language-js"> onRequest: <span class="hljs-keyword">async</span> (request) =&gt; {
    <span class="hljs-comment">// using global codeceptjs instance</span>
    <span class="hljs-keyword">let</span> cookie = <span class="hljs-keyword">await</span> codeceptjs.container.helpers(<span class="hljs-string">'WebDriver'</span>).grabCookie(<span class="hljs-string">'session'</span>);
    request.headers = { <span class="hljs-attr">Cookie</span>: <span class="hljs-string">`session=<span class="hljs-subst">${cookie.value}</span>`</span> };
  }
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="responses"></a><a href="#responses" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Responses</h3>
<p>By default <code>I.have()</code> returns a promise with a created data:</p>
<pre><code class="hljs css language-js"><span class="hljs-keyword">let</span> client = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.have(<span class="hljs-string">'client'</span>);
</code></pre>
<p>Ids of created records are collected and used in the end of a test for the cleanup.
If you need to receive <code>id</code> instead of full response enable <code>returnId</code> in a helper config:</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// returnId: false</span>
<span class="hljs-keyword">let</span> clientId = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.have(<span class="hljs-string">'client'</span>);
<span class="hljs-comment">// clientId == 1</span>

<span class="hljs-comment">// returnId: true</span>
<span class="hljs-keyword">let</span> clientId = <span class="hljs-keyword">await</span> <span class="hljs-built_in">I</span>.have(<span class="hljs-string">'client'</span>);
<span class="hljs-comment">// client == { name: 'John', email: 'john@snow.com' }</span>
</code></pre>
<p>By default <code>id</code> property of response is taken. This behavior can be changed by setting <code>fetchId</code> function in a factory config.</p>
<pre><code class="hljs css language-js">   factories: {
     <span class="hljs-attr">post</span>: {
       <span class="hljs-attr">uri</span>: <span class="hljs-string">"/posts"</span>,
       <span class="hljs-attr">factory</span>: <span class="hljs-string">"./factories/post"</span>,
       <span class="hljs-attr">fetchId</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> data.result.posts[<span class="hljs-number">0</span>].id
     }
   }
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="methods"></a><a href="#methods" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Methods</h2>
<h3><a class="anchor" aria-hidden="true" id="parameters"></a><a href="#parameters" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h3>
<ul>
<li><code>config</code></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="requestcreate"></a><a href="#requestcreate" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_requestCreate</h3>
<p>Executes request to create a record in API.
Can be replaced from a in custom helper.</p>
<h4><a class="anchor" aria-hidden="true" id="parameters-1"></a><a href="#parameters-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<ul>
<li><code>factory</code> <strong>any</strong></li>
<li><code>data</code> <strong>any</strong></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="requestdelete"></a><a href="#requestdelete" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_requestDelete</h3>
<p>Executes request to delete a record in API
Can be replaced from a custom helper.</p>
<h4><a class="anchor" aria-hidden="true" id="parameters-2"></a><a href="#parameters-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<ul>
<li><code>factory</code> <strong>any</strong></li>
<li><code>id</code> <strong>any</strong></li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="have"></a><a href="#have" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>have</h3>
<p>Generates a new record using factory and saves API request to store it.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// create a user</span>
<span class="hljs-built_in">I</span>.have(<span class="hljs-string">'user'</span>);
<span class="hljs-comment">// create user with defined email</span>
<span class="hljs-built_in">I</span>.have(<span class="hljs-string">'user'</span>, { <span class="hljs-attr">email</span>: <span class="hljs-string">'user@user.com'</span>});
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="parameters-3"></a><a href="#parameters-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<ul>
<li><code>factory</code> <strong>any</strong> factory to use</li>
<li><code>params</code> <strong>any</strong> predefined parameters</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="havemultiple"></a><a href="#havemultiple" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>haveMultiple</h3>
<p>Generates bunch of records and saves multiple API requests to store them.</p>
<pre><code class="hljs css language-js"><span class="hljs-comment">// create 3 posts</span>
<span class="hljs-built_in">I</span>.have(<span class="hljs-string">'post'</span>, <span class="hljs-number">3</span>);

<span class="hljs-comment">// create 3 posts by one author</span>
<span class="hljs-built_in">I</span>.have(<span class="hljs-string">'post'</span>, <span class="hljs-number">3</span>, { <span class="hljs-attr">author</span>: <span class="hljs-string">'davert'</span> });
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="parameters-4"></a><a href="#parameters-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameters</h4>
<ul>
<li><code>factory</code> <strong>any</strong></li>
<li><code>times</code> <strong>any</strong></li>
<li><code>params</code> <strong>any</strong></li>
</ul>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2019-1-4</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/helpers/REST"><span class="arrow-prev">← </span><span>REST</span></a><a class="docs-next button" href="/helpers/FileSystem"><span class="function-name-prevnext">FileSystem</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#apidatafactory">ApiDataFactory</a></li><li><a href="#use-case">Use Case</a><ul class="toc-headings"><li><a href="#setup">Setup</a></li><li><a href="#configuration">Configuration</a></li><li><a href="#requests">Requests</a></li><li><a href="#responses">Responses</a></li></ul></li><li><a href="#methods">Methods</a><ul class="toc-headings"><li><a href="#parameters">Parameters</a></li><li><a href="#requestcreate">_requestCreate</a></li><li><a href="#requestdelete">_requestDelete</a></li><li><a href="#have">have</a></li><li><a href="#havemultiple">haveMultiple</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.svg" alt="CodeceptJS" width="66" height="58"/></a><div><h5>Docs</h5><a href="/quickstart">QuickStart</a><a href="/basics">Guides</a><a href="/reference">Reference</a></div><div><h5>Community</h5><a href="https://join.slack.com/t/codeceptjs/shared_invite/enQtMzA5OTM4NDM2MzA4LTNiMTE5YzNlMjQyNWYwZjAzODE3ZTI1MmVkYjY0YTYyNDZmMWJjM2VlODg3NTQzYzM2OGE5ZmIwODFjODk1MzI">Slack Chat</a><a href="https://codecept.discourse.group" target="_blank" rel="noreferrer noopener">Community Forum</a><a href="http://stackoverflow.com/questions/tagged/codeceptjs" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://twitter.com/codeceptjs" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://github.com/Codeception/CodeceptJS">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/codeception/codeceptjs/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&amp;utm_medium=footer&amp;utm_term=link&amp;utm_campaign=reference">Commercial Support</a><a href="http://sdclabs.com/trainings/web-automation-codeceptjs?utm_source=codecept.io&amp;utm_medium=top_menu&amp;utm_term=link&amp;utm_campaign=reference">Trainings</a></div></section><section class="copyright">Copyright © 2019 CodeceptJS</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '0cc13a0af567a05fc38790be681b1491',
                indexName: 'codecept',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script></body></html>