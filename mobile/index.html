<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="/images/cjs-favicon.png">

	<title>Mobile Testing - CodeceptJS</title>

        <link href="../css/bootstrap-3.0.3.min.css" rel="stylesheet">

        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/base.css" rel="stylesheet">
        <link href="../css/extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-30075781-3', 'auto');
            ga('send', 'pageview');
        </script>
        
        <link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400,600,700,900" rel="stylesheet" />
<link href='https://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700' rel='stylesheet' type='text/css'>
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top navbar-inverse" role="navigation">

        <div class="right hidden-sm hidden-xs hidden-md" style="margin-left: 10px; margin-top: 10px; margin-right: 5px; float:right; text-align: right">
            <a href="https://twitter.com/CodeceptJS" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @CodeceptJS</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
        </div>

    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="..">CodeceptJS</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                
                <li >
                    <a href="..">Index</a>
                </li>
                
            
            
            
                
                <li >
                    <a href="../quickstart/">Quickstart</a>
                </li>
                
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Guides <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../basics/">Basics</a>
                        </li>
                    
                        <li >
                            <a href="../acceptance/">Acceptance Testing</a>
                        </li>
                    
                        <li >
                            <a href="../angular/">Protractor Testing</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Mobile Testing</a>
                        </li>
                    
                        <li >
                            <a href="../puppeteer/">Puppeteer Testing</a>
                        </li>
                    
                        <li >
                            <a href="../nightmare/">Nightmare Testing</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/">Helpers</a>
                        </li>
                    
                        <li >
                            <a href="../pageobjects/">Page Objects</a>
                        </li>
                    
                        <li >
                            <a href="../data/">Data Management</a>
                        </li>
                    
                        <li >
                            <a href="../advanced/">Advanced Usage</a>
                        </li>
                    
                        <li >
                            <a href="../hooks/">Plugins & Hooks</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Helpers <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../helpers/WebDriverIO/">WebDriverIO</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/Protractor/">Protractor</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/Puppeteer/">Puppeteer</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/Nightmare/">Nightmare</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/Appium/">Appium</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/REST/">REST</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/ApiDataFactory/">ApiDataFactory</a>
                        </li>
                    
                        <li >
                            <a href="../helpers/FileSystem/">FileSystem</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../installation/">Installation</a>
                        </li>
                    
                        <li >
                            <a href="../commands/">Commands</a>
                        </li>
                    
                        <li >
                            <a href="../configuration/">Configuration</a>
                        </li>
                    
                        <li >
                            <a href="../reports/">Reports</a>
                        </li>
                    
                        <li >
                            <a href="../translation/">Translation</a>
                        </li>
                    
                        <li >
                            <a href="../docker/">Docker</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                
                <li >
                    <a href="../changelog/">Releases</a>
                </li>
                
            
            

            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    Support  <b class="caret"></b>
                </a>
                <ul class="dropdown-menu">
                    <li><a href="https://stackoverflow.com/questions/tagged/codeceptjs?mixed=1">Stack Overflow</a></li>
                    <li><a href="https://join.slack.com/t/codeceptjs/shared_invite/enQtMzA5OTM4NDM2MzA4LTNiMTE5YzNlMjQyNWYwZjAzODE3ZTI1MmVkYjY0YTYyNDZmMWJjM2VlODg3NTQzYzM2OGE5ZmIwODFjODk1MzI">CodeceptJS Slack</a></li>
                    <li><a href="https://twitter.com/codeceptjs">Twitter</a></li>
                </ul>
            </li>

            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">

                    <li class="dropdown promo">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                Services  <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&utm_medium=top_1&utm_term=link&utm_campaign=reference">Test Automation &raquo;</a></li>
                                <li><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&utm_medium=top_2&utm_term=link&utm_campaign=reference">Consulting &raquo;</a></li>
                                <li><a href="http://sdclabs.com/trainings/web-automation-codeceptjs?utm_source=codecept.io&utm_medium=top_menu&utm_term=link&utm_campaign=reference">Trainings &raquo;</a></li>
                            </ul>
                        </li>



                <li >
                    <a rel="prev" href="../puppeteer/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/codeception/codeceptjs/">
                        
                            <img src="/images/github.png" style="height: 1.2em;" alt="">
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>
        <div class="banner">
  <strong>CodeceptJS 1.1 released</strong>. What's new:
  <strong>NodeJS 8.9+ required</strong> |
  <a href="http://codecept.io/puppeteer/" class="">Headless tests with Google Chrome's Puppeteer</a> |
  Async-await support
</div>


        

        <div class="reference">
            <div class="well col-md-3"><div class="bs-sidebar hidden-print" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#mobile-testing">Mobile Testing</a></li>
        
            <li><a href="#setting-up">Setting Up</a></li>
        
            <li><a href="#configuring">Configuring</a></li>
        
            <li><a href="#writing-a-test">Writing a Test</a></li>
        
            <li><a href="#locating-elements">Locating Elements</a></li>
        
            <li><a href="#hybrid-apps-and-contexts">Hybrid Apps and Contexts</a></li>
        
            <li><a href="#cross-platform-testing">Cross-Platform Testing</a></li>
        
            <li><a href="#done">done()</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-7" role="main">

<h1 id="mobile-testing">Mobile Testing</h1>
<p>CodeceptJS allows to test mobile and hybrid apps in a similar manner web applications are tested.
Such tests are executed using <a href="http://appium.io">Appium</a> on emulated or physical devices. Also, Appium allows to test web application on mobile devices.</p>
<p>What makes CodeceptJS better for mobile testing?
Take a look. Here is the sample test for a native mobile application written in CodeceptJS:</p>
<pre><code class="js">I.seeAppIsInstalled(&quot;io.super.app&quot;);
I.click('~startUserRegistrationCD');
I.fillField('~email of the customer', 'Nothing special'));
I.see('davert@codecept.io', '~email of the customer'));
I.clearField('~email of the customer'));
I.dontSee('Nothing special', '~email of the customer'));
I.seeElement({
  android: 'android.widget.Button',
  ios: '//UIAApplication[1]/UIAWindow[1]/UIAButton[1]'
});
</code></pre>

<p>This test is easy to read and write. Also it will work both on iOS and Android devices.
Doesn't it sound cool?</p>
<h2 id="setting-up">Setting Up</h2>
<p>Ensure that you have <a href="http://codecept.io/installation/">CodeceptJS installed</a>.
You will also need to install <a href="http://appium.io/">Appium</a>.
We suggest to use <a href="https://www.npmjs.com/package/appium-doctor">appium-doctor</a> to check if your system is ready for mobile testing.</p>
<pre><code class="sh">npm i -g appium-doctor
</code></pre>

<p>If everything is OK, continue with installing Appium. If not, consider using cloud based alternatives like <a href="https://saucelabs.com">SauceLabs</a> or <a href="http://browserstack.com">BrowserStack</a>. Cloud services provide hosted appium with real and emulated mobile devices.</p>
<p>To install Appium use npm:</p>
<pre><code class="sh">npm i -g appium
</code></pre>

<p>Then you need to prepare application for execution.
It should be packed into apk (for Android) or .ipa (for iOS) or zip.</p>
<p>Next, is to launch the emulator or connect physical device.
Once they are prepared, launch Appium:</p>
<pre><code class="sh">appium
</code></pre>

<p>To run mobile test you need either an device emulator (available with Android SDK or iOS), real device connected for mobile testing. Alternatively, you may execute Appium with device emulator inside Docker container.</p>
<p>CodeceptJS should be installed with webdriverio support:</p>
<pre><code class="bash">npm install -g codeceptjs webdriverio
</code></pre>

<h2 id="configuring">Configuring</h2>
<p>Initialize CodeceptJS with <code>init</code> command:</p>
<pre><code class="sh">codeceptjs init
</code></pre>

<p>Select <a href="http://codecept.io/helpers/Appium/">Appium helper</a> when asked.</p>
<pre><code class="sh">? What helpers do you want to use?
 ◯ WebDriverIO
 ◯ Protractor
 ◯ Puppeteer
 ◯ Nightmare
❯◉ Appium
 ◯ REST
</code></pre>

<p>You will also be asked for the platform and the application package.</p>
<pre><code class="sh">? [Appium] Application package. Path to file or url
</code></pre>

<p>Check the newly created <code>codecept.json</code> configuration file.
You may want to set some additional Appium settings via <a href="https://appium.io/slate/en/master/?javascript#appium-server-capabilities">desiredCapabilities</a></p>
<pre><code class="js">&quot;helpers&quot;: {
  &quot;Appium&quot;: {
    &quot;app&quot;: &quot;my_app.apk&quot;,
    &quot;platform&quot;: &quot;Android&quot;,
    &quot;desiredCapabilities&quot;: {}
  }
}
</code></pre>

<p>Once you configured Appium, create the first test by running</p>
<pre><code class="sh">codeceptjs gt
</code></pre>

<h2 id="writing-a-test">Writing a Test</h2>
<p>A test is written in a scenario-driven manner, listing an actions taken by a user.
This is the sample test for a native mobile application:</p>
<pre><code class="js">Scenario('test registration', (I) =&gt; {
  I.click('~startUserRegistrationCD');
  I.fillField('~inputUsername', 'davert');
  I.fillField('~inputEmail', 'davert@codecept.io');
  I.fillField('~inputPassword', '123456');
  I.hideDeviceKeyboard();
  I.click('~input_preferredProgrammingLanguage');
  I.click('Javascript');
  I.checkOption('#io.demo.testapp:id/input_adds');
  I.click('Register User (verify)');
  I.swipeUp(&quot;#io.selendroid.testapp:id/LinearLayout1&quot;);
  I.see('Javascript'); // see on the screen
  I.see('davert', '~label_username_data'); // see in element
});
</code></pre>

<p>Mobile test is pretty similar to a web test. And it is much the same, if you test hybrid app with a web view context inside.
However, mobile apps do not have URLs, Cookies, they have other features which may vary on a running platform.</p>
<p>There are mobile-only methods like:</p>
<ul>
<li><code>swipeUp</code>, <code>swipeLeft</code>, ...</li>
<li><code>hideDeviceKeyboard</code>,</li>
<li><code>seeAppIsInstalled</code>, <code>installApp</code>, <code>removeApp</code>, <code>seeAppIsNotInstalled</code> - Android only</li>
</ul>
<p>and <a href="http://codecept.io/helpers/Appium/">others</a>.</p>
<h2 id="locating-elements">Locating Elements</h2>
<p>To start writing a test it is important to understand how to locate elements for native mobile applications.
In both Android and iPhone elements are defined in XML format and can be searched by XPath locators.</p>
<pre><code class="js">I.seeElement('//android.widget.ScrollView/android.widget.LinearLayout')'
</code></pre>

<p>CSS locators are not supported in native mobile apps, you need to switch to web context to use them.</p>
<p>Elements can also be located by their accessability id, available both at Android and iOS.
Accessibility id is recommended to use for locating element, as it rarely changed.</p>
<ul>
<li>iOS uses <a href="https://developer.apple.com/documentation/uikit/uiaccessibilityidentification">UIAccessibilityIdentification</a></li>
<li>Android <code>accessibility id</code> matches the content-description</li>
<li>Web view uses <code>[aria-label]</code> attribute as accessibility id</li>
</ul>
<p>Add <code>~</code> prefix to search for element by its accessibility id:</p>
<pre><code class="js">I.seeElement('~startUserRegistrationButton');
</code></pre>

<p>Elements can also have ids, which can be located with <code>#</code> prefix.
On Android it it is important to keep full package name in id locator:</p>
<pre><code class="js">I.seeElement('#io.selendroid.testapp:id/inputUsername');
</code></pre>

<p>Buttons can be matched by their visible text:</p>
<pre><code class="js">I.tap('Click me!');
I.click('Click me!');
</code></pre>

<p>Native iOS/Android locators can be used with <code>android=</code> and <code>ios=</code> prefixes. <a href="http://webdriver.io/guide/usage/selectors.html#Mobile-Selectors">Learn more</a>.</p>
<p>But how to get all those locators? We recommend to use <a href="https://github.com/appium/appium-desktop">Appium Inspector</a>.</p>
<p>For Android you can use <strong>UI Automator Viewer</strong> bundled with Android SDK:</p>
<p><img alt="" src="https://user-images.githubusercontent.com/220264/27566310-1f631604-5aed-11e7-8b92-1ffe9e9f14f9.png" /></p>
<h2 id="hybrid-apps-and-contexts">Hybrid Apps and Contexts</h2>
<p>Mobile applications may have different contexts. For instance, there can be native view and web view with a browser instance in it.</p>
<p>To execute commands in context of a webview use <code>within('webview')</code> function:</p>
<pre><code class="js">I.click('~startWebView');
within('webview', () =&gt; {
  I.see('Preferred car');
  I.click('Send me your name!');
});
</code></pre>

<p>It will locate first available webview, switch to it, and switch back to native application after.
Inside WebView all browser features are enabled: CSS locators, JavaScript, etc.</p>
<p>To set a specific context use <code>{ web: 'webview.context' }</code> instead:</p>
<pre><code class="js">within({webview: 'MyWEBVIEW_com.my.app'}, () =&gt; );
</code></pre>

<p>Alternatively use <code>switchToWeb</code> or <code>switchToNative</code> methods to switch between contexts.</p>
<pre><code class="js">I.click('~startWebView');
I.switchToWeb();
I.see('Preferred car');
I.click('Send me your name!');
I.switchToNative();
</code></pre>

<p>To get a list of all contexts use <code>grabAllContexts</code> method:</p>
<pre><code class="js">let contexts = await I.grabAllContexts();
</code></pre>

<h2 id="cross-platform-testing">Cross-Platform Testing</h2>
<p>It is often happen that mobile applications behave similarly on different platforms. Can we build one test for them? Yes!
CodeceptJS provides a way to specify different locators for Android and iOS platforms:</p>
<pre><code class="js">I.click({android: '//android.widget.Button', ios: '//UIAApplication[1]/UIAWindow[1]/UIAButton[1]'});
</code></pre>

<p>In case some code should be executed on one platform and ignored on others use <code>runOnAndroid</code> and <code>runOnIOS</code> methods:</p>
<pre><code class="js">I.runOnAndroid(() =&gt; {
  I.click('Hello Android');
});
I.runOnIOS(() =&gt; {
  I.click('Hello iOS');
});
</code></pre>

<p>The same code can be shared for web applications as well. To execute some code in web browser only, use <code>I.runInWeb</code>:</p>
<pre><code class="js">I.runInWeb(() =&gt; {
  I.amOnPage('/login'); // not available for mobile
  I.fillField('name', 'jon');
  I.fillField('password', '123456');
  I.click('Login');
  I.waitForElement('#success'); // no available for mobile
});
</code></pre>

<p>Just as you can specify android, and ios-specific locators, you can do so for web:</p>
<pre><code class="js">I.click({web: '#login', ios: '//UIAApplication[1]/UIAWindow[1]/UIAButton[1]'});
</code></pre>

<h2 id="done">done()</h2></div>
            <div class="col-md-2" class="promo-1">
    <div class="promo-banner"  >
                <h3>
                    Enterprise Support
                </h3>

                <p>We help you to develop efficient end to end tests
                    <a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&utm_medium=right&utm_term=link&utm_campaign=reference">Learn More &raquo;</a>
                </p>
    </div>

</div>
            <div class="clearfix"></div>
        </div>
        

     <footer>
        <div class="container">
          <div class="row">
            <div class="col-md-4">

            <h4>Sponsored by</h4>

            <a href="https://rebilly.com" target="_blank">
            <img class="rebilly" src="/images/Rebilly.png" alt="" >
            </a>
            <p><em>Uncover your revenue potential with<br>
                our recurring billing software.</em></p>
            </div>

<div class="col-md-4">
          <ul class="imglist">
                    <li class="github"><a href="https://github.com/codeception/codeceptjs"><img src="/images/github.png" alt="GitHub">Codeception/CodeceptJS</a></li>
                    <li class="twitter">
                        <a  href="https://twitter.com/codeceptjs">
                            <img src="/images/twitter.png" alt="">@CodeceptJS
                        </a>
                    </li>
                    <li><h4>Support:</h4></li>
                    <li><a href="https://join.slack.com/t/codeceptjs/shared_invite/enQtMzA5OTM4NDM2MzA4LTNiMTE5YzNlMjQyNWYwZjAzODE3ZTI1MmVkYjY0YTYyNDZmMWJjM2VlODg3NTQzYzM2OGE5ZmIwODFjODk1MzI">Slack Channel</a></li>
                    <li><a href="https://stackoverflow.com/questions/tagged/codeceptjs?mixed=1">Stack Overflow</a></li>
                    <li><a href="http://sdclabs.com/codeceptjs?utm_source=codecept.io&utm_medium=bottom&utm_term=link&utm_campaign=reference">Commercial Support</a></li>
                </ul>

</div>

            <div class="col-md-4">




                <h4>Our Contributors</h4>
                <div id="contributors"></div>
            </div>

        </div>


        <center>Created by <strong>CodeceptJS Team</strong></center>

</div>

    </footer>


        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script src="../js/base.js"></script>

    </body>
</html>